const images=document.querySelectorAll("img");images.forEach(t=>{t.onerror=function(){this.onerror=null,this.src="/assets/images/bg/404image.jpg"}}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".add-to-cart-btn").forEach(function(t){t.addEventListener("click",function(t){t.preventDefault();const e=this.getAttribute("data-puppy-id"),n=this.querySelector(".cart-icon"),o=document.getElementById(`loader-${e}`);n&&(n.style.display="none"),o&&(o.style.display="inline-block"),fetch("/cart/add",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({puppy_id:e})}).then(t=>t.json()).then(t=>{t&&(n&&(n.style.display="inline-block"),o&&(o.style.display="none"),$.toast({heading:t.heading,text:t.message,position:"top-right",icon:t.icon,stack:5,hideAfter:9e3}))}).catch(t=>{n.style.display="inline-block",o.style.display="none",$.toast({heading:"Error",text:"An unexpected error occurred, please try again.",icon:"error",stack:5,hideAfter:9e3})}).finally(()=>{n.style.display="inline-block",o.style.display="none"})})}),document.querySelectorAll(".buy-now-btn").forEach(function(t){t.addEventListener("click",function(t){t.preventDefault();const e=this.getAttribute("data-puppy-id");fetch("/cart/add",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({puppy_id:e})}).then(t=>t.json()).then(t=>{"success"===t.status||"exists"===t.status?window.location.href="/cart":$.toast({heading:"Error",text:"Failed to add puppy to cart.",icon:"error",stack:5,hideAfter:9e3})}).catch(t=>{$.toast({heading:"Error",text:"An unexpected error occurred, please try again.",icon:"error",stack:5,hideAfter:9e3})})})})}),$(document).ready(function(){$(".delete-cart-item").on("click",function(t){t.preventDefault();const e=$(this).data("item-id"),n=$(this).closest("tr");$.ajax({url:"/cart/remove",type:"POST",contentType:"application/json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:JSON.stringify({item_id:e}),success:function(t){t.success?($.toast({heading:t.heading,text:t.message,position:"top-right",icon:t.icon,stack:!1}),n.fadeOut(500,function(){$(this).remove()})):$.toast({heading:t.heading,text:t.message,position:"top-right",icon:t.icon,stack:!1})},error:function(){$.toast({heading:"Error",text:"An unexpected error occurred, please try again.",icon:"error"})}})})});